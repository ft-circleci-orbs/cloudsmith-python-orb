description: |
  Generates a pip index url string to use for the requested repository. 
  Sets the CLOUDSMITH_PIP_INDEX_URL environment variable.
  Note: Depends on the authenticate-with-oidc command being run first.
parameters:
  repository_identifier:
    description: |
      The identity/slug of the Cloudsmith repository
    type: string
steps:
  - run:
      name: Export parameters for script
      command: |
        echo "export CLOUDSMITH_REPOSITORY_IDENTIFIER=\"<<parameters.repository_identifier>>\"" >> $BASH_ENV
  - run:
      name: Setup environment variables for pip
      command: <<include(scripts/set_env_vars_for_pip.sh)>>
