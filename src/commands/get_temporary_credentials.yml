description: >
  Connects to Cloudsmith via OIDC
parameters:
  repository:
    description: >
      ID of the cloudsmith repository
    type: string
    default: "financial-times-internal-releases"
  service:
    description: >
      ID of the Cloudsmith Service account that will be used to access the repository
    type: string
steps:
  - run:
      name: Export CLOUDSMITH_REPOSITORY
      command: |
        echo "export CLOUDSMITH_REPOSITORY=\"<<parameters.repository>>\"" >> $BASH_ENV
  - run:
      name: Export CLOUDSMITH_SERVICE
      command: |
        echo "export CLOUDSMITH_SERVICE=\"<<parameters.service>>\"" >> $BASH_ENV
  - run:
      name: Get Temporary Credentials
      command: <<include(scripts/get_temporary_credentials.sh)>>
